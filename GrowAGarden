-- Wysh Hub (minimal, stable build) â€“ GUI + Minimize + Progress Kick
-- Drop this as a LocalScript in StarterPlayerScripts.

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

local LP = Players.LocalPlayer
local PG = LP:WaitForChild("PlayerGui")

-- destroy old copies
local old = PG:FindFirstChild("WyshGUI")
if old then old:Destroy() end

local function tweenHover(ui, baseSize)
	if not ui or not ui:IsA("GuiObject") then return end
	ui.MouseEnter:Connect(function()
		TweenService:Create(ui, TweenInfo.new(0.12, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {
			Size = baseSize + UDim2.fromOffset(6,4)
		}):Play()
	end)
	ui.MouseLeave:Connect(function()
		TweenService:Create(ui, TweenInfo.new(0.12, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {
			Size = baseSize
		}):Play()
	end)
end

-- Root
local gui = Instance.new("ScreenGui")
gui.Name = "WyshGUI"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false
gui.Parent = PG

-- Minimized pill
local pill = Instance.new("TextButton")
pill.Name = "Wysh"
pill.Text = "WyshHub"
pill.Size = UDim2.fromOffset(160, 32)
pill.Position = UDim2.new(1, -170, 0, 12)
pill.BackgroundColor3 = Color3.fromRGB(134,185,112)
pill.TextColor3 = Color3.new(1,1,1)
pill.TextSize = 18
pill.Visible = false
pill.Parent = gui
do
	local uc = Instance.new("UICorner"); uc.CornerRadius = UDim.new(1,0); uc.Parent = pill
	local st = Instance.new("UIStroke"); st.Color = Color3.fromRGB(80,110,70); st.Thickness=2; st.Parent = pill
end

-- Window
local win = Instance.new("Frame")
win.Size = UDim2.fromOffset(420, 330)
win.Position = UDim2.new(0.5, 0, 0.5, 0)
win.AnchorPoint = Vector2.new(0.5, 0.5)
win.BackgroundColor3 = Color3.fromRGB(195,235,185)
win.Parent = gui
do
	local uc = Instance.new("UICorner"); uc.CornerRadius = UDim.new(0,24); uc.Parent = win
	local st = Instance.new("UIStroke"); st.Color = Color3.fromRGB(150,190,130); st.Thickness=3; st.Parent = win
end

-- Header (draggable)
local header = Instance.new("Frame")
header.Size = UDim2.new(1,0,0,36)
header.BackgroundColor3 = Color3.fromRGB(134,185,112)
header.Active = true
header.Parent = win
do
	local uc = Instance.new("UICorner"); uc.CornerRadius = UDim.new(0,24); uc.Parent = header
end

local title = Instance.new("TextLabel")
title.BackgroundTransparency = 1
title.Size = UDim2.fromScale(1,1)
title.Text = "  Wysh Hub"
title.TextColor3 = Color3.new(1,1,1)
title.TextSize = 22
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = header

local minimize = Instance.new("TextButton")
minimize.Size = UDim2.fromOffset(22,22)
minimize.Position = UDim2.new(1, -14 - 22, 0.5, -11)
minimize.BackgroundColor3 = Color3.fromRGB(255,212,59)
minimize.Text = ""
minimize.Parent = header
do
	local uc = Instance.new("UICorner"); uc.CornerRadius = UDim.new(1,0); uc.Parent = minimize
end

-- Dragging
do
	local dragging = false
	local dragStart, startPos
	header.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = win.Position
		end
	end)
	header.InputEnded:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = false
		end
	end)
	UserInputService.InputChanged:Connect(function(input)
		if not dragging then return end
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			local delta = input.Position - dragStart
			win.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

-- Minimize behavior
minimize.MouseButton1Click:Connect(function()
	local screenSize = gui.AbsoluteSize
	local targetPos = UDim2.new(1, -170, 0, 12)
	TweenService:Create(win, TweenInfo.new(0.22), {
		Size = UDim2.fromOffset(0,0),
		Position = UDim2.new(targetPos.X.Scale, targetPos.X.Offset + 80, targetPos.Y.Scale, targetPos.Y.Offset + 16)
	}):Play()
	task.delay(0.22, function()
		win.Visible = false
		pill.Visible = true
	end)
end)

pill.MouseButton1Click:Connect(function()
	pill.Visible = false
	win.Size = UDim2.fromOffset(420,330)
	win.Position = UDim2.new(0.5,0,0.5,0)
	win.Visible = true
end)

-- Body
local body = Instance.new("Frame")
body.Size = UDim2.new(1, -24, 1, -36 - 24)
body.Position = UDim2.new(0, 12, 0, 36 + 6)
body.BackgroundTransparency = 1
body.Parent = win

-- Status line
local status = Instance.new("TextLabel")
status.BackgroundTransparency = 1
status.Size = UDim2.new(1,0,0,20)
status.Position = UDim2.new(0,0,1,-20)
status.Text = "Ready."
status.TextColor3 = Color3.fromRGB(80,110,70)
status.TextSize = 14
status.Font = Enum.Font.Gotham
status.Parent = win

local function setStatus(txt)
	status.Text = txt
	print("[Wysh]", txt)
end

-- Progress Bar
local progressContainer = Instance.new("Frame")
progressContainer.Size = UDim2.new(0, 360, 0, 40)
progressContainer.Position = UDim2.new(0.5, -180, 0.3, 0)
progressContainer.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
progressContainer.Parent = body

local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(134,185,112)
progressBar.Parent = progressContainer

local progressText = Instance.new("TextLabel")
progressText.Size = UDim2.new(1, 0, 1, 0)
progressText.BackgroundTransparency = 1
progressText.Text = "0%"
progressText.TextColor3 = Color3.fromRGB(0, 0, 0)
progressText.TextSize = 20
progressText.Font = Enum.Font.GothamBold
progressText.Parent = progressContainer

-- Add corners to progress container
local progressCorner = Instance.new("UICorner")
progressCorner.CornerRadius = UDim.new(0, 10)
progressCorner.Parent = progressContainer

local barCorner = Instance.new("UICorner")
barCorner.CornerRadius = UDim.new(0, 10)
barCorner.Parent = progressBar

-- Start Button
local startButton = Instance.new("TextButton")
startButton.Size = UDim2.new(0, 200, 0, 50)
startButton.Position = UDim2.new(0.5, -100, 0.6, 0)
startButton.BackgroundColor3 = Color3.fromRGB(134,185,112)
startButton.Text = "START LOADING"
startButton.TextColor3 = Color3.new(1,1,1)
startButton.TextSize = 20
startButton.Font = Enum.Font.GothamBold
startButton.Parent = body

local startCorner = Instance.new("UICorner")
startCorner.CornerRadius = UDim.new(0, 10)
startCorner.Parent = startButton

local startStroke = Instance.new("UIStroke")
startStroke.Color = Color3.fromRGB(80,110,70)
startStroke.Thickness = 2
startStroke.Parent = startButton

tweenHover(startButton, startButton.Size)

-- Progress variables
local progress = 0
local isProgressing = false

local function updateProgressBar()
	progressBar.Size = UDim2.new(progress / 100, 0, 1, 0)
	progressText.Text = math.floor(progress) .. "%"
	
	if progress >= 100 then
		setStatus("Loading complete! Kicking player...")
		wait(1)
		LP:Kick("Wysh Hub: Loading completed successfully!")
	end
end

local function startProgress()
	if isProgressing then return end
	isProgressing = true
	startButton.Text = "LOADING..."
	startButton.BackgroundColor3 = Color3.fromRGB(100, 150, 100)
	
	setStatus("Loading in progress...")
	
	-- Simulate loading progress
	local connection
	connection = RunService.Heartbeat:Connect(function(deltaTime)
		if progress < 100 then
			progress = math.min(100, progress + deltaTime * 20) -- 20% per second
			updateProgressBar()
		else
			if connection then
				connection:Disconnect()
			end
		end
	end)
end

startButton.MouseButton1Click:Connect(startProgress)

-- initial
setStatus("Ready to load.")
updateProgressBar()
